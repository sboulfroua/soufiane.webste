<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متجر ريدا</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* التنسيقات العامة */
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #333;
            --gray: #6c757d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: var(--light);
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* الترويسة */
        header {
            background: linear-gradient(135deg, var(--primary), #1a2530);
            color: white;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .logo i {
            color: var(--warning);
        }
        
        nav {
            width: 100%;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 30px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        nav a i {
            font-size: 1.2rem;
        }
        
        /* المحتوى الرئيسي */
        main {
            flex: 1;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .section-title {
            text-align: center;
            margin: 20px 0 30px;
            position: relative;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            border-radius: 2px;
        }
        
        /* تنسيقات المنتجات */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }
        
        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.5s ease;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: var(--warning);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            z-index: 2;
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid #eee;
        }
        
        .product-info {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .product-description {
            color: #666;
            margin-bottom: 15px;
            flex: 1;
            font-size: 0.95rem;
        }
        
        .price-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .price {
            font-weight: bold;
            font-size: 1.3rem;
            color: var(--danger);
        }
        
        .old-price {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
            margin-left: 5px;
        }
        
        .whatsapp-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #25D366;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        
        .whatsapp-btn:hover {
            background: #128C7E;
        }
        
        /* تنسيقات لوحة التحكم */
        .dashboard {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .dashboard-nav {
            background: var(--primary);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .dashboard-nav a {
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 30px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dashboard-nav a:hover {
            background-color: rgba(255,255,255,0.15);
        }
        
        .dashboard-card {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
        }
        
        .dashboard-card h2 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .products-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .product-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .product-item.editing {
            box-shadow: 0 8px 24px rgba(44, 62, 80, 0.25), 0 1.5px 4px rgba(52, 152, 219, 0.15);
            transform: scale(1.03) rotateY(2deg);
            border: 2px solid var(--secondary);
        }
        
        .product-item h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .product-item p {
            color: #666;
            margin-bottom: 10px;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* تنسيقات النماذج */
        .form-container {
            max-width: 600px;
            margin: 20px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            animation: slideUp 0.5s ease;
        }
        
        .form-container h2 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .btn-block {
            width: 100%;
            padding: 14px;
        }
        
        .error {
            color: var(--danger);
            padding: 15px;
            background: #ffebee;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .success-message {
            color: var(--success);
            padding: 15px;
            background: #e8f5e9;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* الصفحات المخفية */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        /* التذييل */
        footer {
            background: linear-gradient(135deg, var(--primary), #1a2530);
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 40px;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .contact-info a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .contact-info a:hover {
            color: var(--warning);
            transform: translateY(-2px);
        }
        
        .copyright {
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }
        
        /* الصفحة الرئيسية - الهيرو */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1607082350899-7e105aa886ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            height: 400px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 20px;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin-bottom: 25px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }
        
        .hero-btn {
            background: var(--warning);
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .hero-btn:hover {
            background: #e67e22;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* رسالة الترحيب */
        .welcome-message {
            text-align: center;
            margin: 20px 0 40px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .welcome-message h2 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .welcome-message p {
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }
        
        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav {
                flex-direction: column;
                align-items: center;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .dashboard-nav {
                flex-direction: column;
                align-items: center;
            }
        }
        
        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .hero {
                height: 300px;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
        }
        
        /* شريط التحميل */
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }
        
        .loader .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--secondary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- الصفحة الرئيسية -->
    <div id="home-page" class="page active">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <span>متجر ريدا</span>
                </div>
                <nav>
                    <a href="#" onclick="showPage('home-page')" class="active">
                        <i class="fas fa-home"></i> الرئيسية
                    </a>
                    <a href="#" onclick="showPage('products-page')">
                        <i class="fas fa-box-open"></i> المنتجات
                    </a>
                    <a href="#" onclick="showPage('login-page')">
                        <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                    </a>
                </nav>
            </div>
        </header>

        <main>
            <section class="hero">
                <h1>مرحبًا بكم في متجر ريدا</h1>
                <p>اكتشف أحدث المنتجات بأسعار تنافسية وجودة عالية تناسب جميع الأذواق</p>
                <a href="#" onclick="showPage('products-page')" class="hero-btn">
                    <i class="fas fa-shopping-cart"></i> تصفح المنتجات
                </a>
            </section>
            
            <div class="welcome-message">
                <h2>مرحبًا بكم في متجر ريدا الإلكتروني</h2>
                <p>
                    نقدم لكم في متجر ريدا مجموعة متنوعة من المنتجات المميزة التي تلبي احتياجاتكم اليومية. 
                    نسعى دائمًا لتقديم أفضل جودة وأفضل أسعار مع خدمة عملاء متميزة. 
                    تسوقوا الآن واستمتعوا بتجربة تسوق فريدة من نوعها!
                </p>
            </div>
            
            <h2 class="section-title">أحدث المنتجات</h2>
            <div class="products-grid" id="featured-products">
                <!-- سيتم ملؤها بالجافاسكريبت -->
                <div class="loader">
                    <div class="spinner"></div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <div class="contact-info">
                    <a href="#" id="whatsapp-link">
                        <i class="fab fa-whatsapp"></i> للتواصل عبر الواتساب
                    </a>
                    <a href="tel:+212684103482">
                        <i class="fas fa-phone"></i> +212 684-103482
                    </a>
                </div>
                <div class="copyright">
                    © 2023 متجر ريدا. جميع الحقوق محفوظة.
                </div>
            </div>
        </footer>
    </div>

    <!-- صفحة جميع المنتجات -->
    <div id="products-page" class="page">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <span>جميع المنتجات</span>
                </div>
                <nav>
                    <a href="#" onclick="showPage('home-page')">
                        <i class="fas fa-home"></i> الرئيسية
                    </a>
                    <a href="#" onclick="showPage('products-page')" class="active">
                        <i class="fas fa-box-open"></i> المنتجات
                    </a>
                    <a href="#" onclick="showPage('login-page')">
                        <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                    </a>
                </nav>
            </div>
        </header>

        <main>
            <h2 class="section-title">جميع منتجاتنا</h2>
            <div class="products-grid" id="all-products">
                <!-- سيتم ملؤها بالجافاسكريبت -->
                <div class="loader">
                    <div class="spinner"></div>
                </div>
            </div>
        </main>
        <footer>
            <div class="footer-content">
                <div class="contact-info">
                    <a href="#" id="whatsapp-link">
                        <i class="fab fa-whatsapp"></i> للتواصل عبر الواتساب
                    </a>
                    <a href="tel:+212684103482">
                        <i class="fas fa-phone"></i> +212 684-103482
                    </a>
                </div>
                <div class="copyright">
                    © 2023 متجر ريدا. جميع الحقوق محفوظة.
                </div>
            </div>
        </footer>
    </div>

    <!-- صفحة تسجيل الدخول -->
    <div id="login-page" class="page">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <span>تسجيل الدخول</span>
                </div>
                <nav>
                    <a href="#" onclick="showPage('home-page')">
                        <i class="fas fa-home"></i> الرئيسية
                    </a>
                    <a href="#" onclick="showPage('products-page')">
                        <i class="fas fa-box-open"></i> المنتجات
                    </a>
                </nav>
            </div>
        </header>

        <main>
            <div class="form-container">
                <h2><i class="fas fa-lock"></i> تسجيل الدخول إلى لوحة التحكم</h2>
                <div id="login-error" class="error" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <span></span>
                </div>
                <form id="login-form">
                    <div class="form-group">
                        <label for="username"><i class="fas fa-user"></i> اسم المستخدم:</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="fas fa-key"></i> كلمة المرور:</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                    </button>
                </form>
        </div>
    </main>
    <footer>
        <div class="footer-content">
            <div class="contact-info">
                <a href="#" id="whatsapp-link">
                    <i class="fab fa-whatsapp"></i> للتواصل عبر الواتساب
                </a>
                <a href="tel:+212684103482">
                    <i class="fas fa-phone"></i> +212 684-103482
                </a>
            </div>
            <div class="copyright">
                © 2023 متجر ريدا. جميع الحقوق محفوظة.
            </div>
        </div>
    </footer>
    </div>

    <!-- لوحة التحكم -->
    <div id="dashboard-page" class="page">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-cogs"></i>
                    <span>لوحة التحكم</span>
                </div>
                <nav class="dashboard-nav">
                    <a href="#" onclick="showPage('dashboard-home')">
                        <i class="fas fa-home"></i> الرئيسية
                    </a>
                    <a href="#" onclick="showPage('add-product-page')">
                        <i class="fas fa-plus-circle"></i> إضافة منتج
                    </a>
                    <a href="#" onclick="showPage('edit-whatsapp-page')">
                        <i class="fab fa-whatsapp"></i> تعديل رقم الواتساب
                    </a>
                    <a href="#" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
                    </a>
                </nav>
            </div>
        </header>

        <main class="dashboard">
            <!-- الصفحة الرئيسية للوحة التحكم -->
            <div id="dashboard-home" class="page active">
                <div class="dashboard-card">
                    <h2><i class="fab fa-whatsapp"></i> رقم الواتساب الحالي</h2>
                    <p id="current-whatsapp" class="whatsapp-number">
                        <i class="fab fa-whatsapp"></i> 
                        <span>+212684103482</span>
                    </p>
                </div>

                <div class="dashboard-card">
                    <h2><i class="fas fa-boxes"></i> منتجاتي</h2>
                    <div class="products-list" id="admin-products">
                        <!-- سيتم ملؤها بالجافاسكريبت -->
                        <div class="loader">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- صفحة إضافة منتج -->
            <div id="add-product-page" class="page">
                <div class="form-container">
                    <h2><i class="fas fa-plus-circle"></i> إضافة منتج جديد</h2>
                    <div id="product-error" class="error" style="display: none;">
                        <i class="fas fa-exclamation-circle"></i>
                        <span></span>
                    </div>
                    <div id="product-success" class="success-message" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <span></span>
                    </div>
                    <form id="add-product-form">
                        <div class="form-group">
                            <label for="product-name"><i class="fas fa-tag"></i> اسم المنتج:</label>
                            <input type="text" id="product-name" name="name" required placeholder="أدخل اسم المنتج">
                        </div>
                        <div class="form-group">
                            <label for="product-desc"><i class="fas fa-align-left"></i> وصف المنتج:</label>
                            <textarea id="product-desc" name="description" rows="4" required placeholder="أدخل وصفًا للمنتج"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="product-price"><i class="fas fa-money-bill-wave"></i> السعر (DH):</label>
                            <input type="number" id="product-price" name="price" step="0.01" min="0" required placeholder="أدخل سعر المنتج">
                        </div>
                        <div class="form-group">
                            <label for="product-image"><i class="fas fa-image"></i> صورة المنتج (رابط):</label>
                            <input type="url" id="product-image" name="image" required placeholder="أدخل رابط صورة المنتج">
                        </div>
                        <button type="submit" class="btn btn-success btn-block">
                            <i class="fas fa-save"></i> حفظ المنتج
                        </button>
                    </form>
                </div>
            </div>

            <!-- صفحة تعديل رقم الواتساب -->
            <div id="edit-whatsapp-page" class="page">
                <div class="form-container">
                    <h2><i class="fab fa-whatsapp"></i> تعديل رقم الواتساب</h2>
                    <div id="whatsapp-error" class="error" style="display: none;">
                        <i class="fas fa-exclamation-circle"></i>
                        <span></span>
                    </div>
                    <div id="whatsapp-success" class="success-message" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <span></span>
                    </div>
                    <form id="whatsapp-form">
                        <div class="form-group">
                            <label for="whatsapp-number"><i class="fas fa-phone"></i> رقم الواتساب (مع مفتاح الدولة):</label>
                            <input type="text" id="whatsapp-number" name="whatsapp" required placeholder="مثال: +212612345678">
                        </div>
                        <button type="submit" class="btn btn-success btn-block">
                            <i class="fas fa-save"></i> حفظ التغييرات
                        </button>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script>
        // بيانات التطبيق (بدلاً من قاعدة البيانات)
        let appData = {
            currentUser: null,
            whatsappNumber: "+212684103482", // رقم افتراضي
            products: [
                {
                    id: 1,
                    name: "سماعات لاسلكية",
                    description: "سماعات بلوتوث عالية الجودة مع عزل ضوضاء، بطارية تدوم 20 ساعة",
                    price: 199.99,
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
                },
                {
                    id: 2,
                    name: "ساعة ذكية",
                    description: "ساعة ذكية متطورة مع شاشة AMOLED، تتبع اللياقة البدنية ومقاومة للماء",
                    price: 349.99,
                    image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
                },
                {
                    id: 3,
                    name: "هاتف ذكي",
                    description: "هاتف ذكي حديث بمعالج سريع وكاميرا ثلاثية العدسات وبطارية طويلة الأمد",
                    price: 1299.00,
                    image: "https://images.unsplash.com/photo-1598327105666-5b89351aff97?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
                },
                {
                    id: 4,
                    name: "حقيبة كمبيوتر محمول",
                    description: "حقيبة أنيقة ومتينة لحمل الكمبيوتر المحمول والملحقات، مع جيوب متعددة",
                    price: 89.50,
                    image: "https://images.unsplash.com/photo-1546938576-6e6a64f317cc?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
                },
                {
                    id: 5,
                    name: "كاميرا رقمية",
                    description: "كاميرا احترافية بدقة 24.2 ميجابكسل، مع عدسة 18-55mm، تصوير فيديو 4K",
                    price: 799.00,
                    image: "https://images.unsplash.com/photo-1510127034890-ba27508e9f1c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
                },
                {
                    id: 6,
                    name: "لوحة مفاتيح لاسلكية",
                    description: "لوحة مفاتيح ميكانيكية لاسلكية مع إضاءة RGB قابلة للتخصيص",
                    price: 129.99,
                    image: "https://images.unsplash.com/photo-1587829741301-dc798b83add3?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
                }
            ],
            users: [
                {
                    id: 1,
                    username: "admin",
                    password: "admin123" // في الواقع يجب تخزين كلمة مرور مشفرة
                }
            ],
            editingProductId: null
        };

        // عرض الصفحات
        function showPage(pageId) {
            // إخفاء جميع الصفحات
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // إظهار الصفحة المطلوبة
            document.getElementById(pageId).classList.add('active');
            
            // تحديث التنقل النشط
            document.querySelectorAll('nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            // إذا كانت الصفحة هي لوحة التحكم، أظهر الصفحة الفرعية الرئيسية dashboard-home
            if (pageId === 'dashboard-page') {
                document.querySelectorAll('#dashboard-page .page').forEach(subPage => {
                    subPage.classList.remove('active');
                });
                document.getElementById('dashboard-home').classList.add('active');
                loadDashboard();
            }
            // إذا كانت إحدى صفحات لوحة التحكم الفرعية
            else if (['dashboard-home', 'add-product-page', 'edit-whatsapp-page'].includes(pageId)) {
                document.querySelectorAll('#dashboard-page .page').forEach(subPage => {
                    subPage.classList.remove('active');
                });
                document.getElementById(pageId).classList.add('active');
                if (pageId === 'dashboard-home') loadDashboard();
                else if (pageId === 'add-product-page') {
                    // إعادة تعيين نموذج الإضافة عند الدخول للصفحة
                    document.getElementById('add-product-form').reset();
                    document.getElementById('product-error').style.display = 'none';
                    document.getElementById('product-success').style.display = 'none';
                    
                    // إذا كنا في وضع التعديل، لا نغير الزر
                    if (!appData.editingProductId) {
                        const addBtn = document.querySelector('#add-product-form button[type="submit"]');
                        addBtn.innerHTML = '<i class="fas fa-save"></i> حفظ المنتج';
                    }
                }
            }
            // تحميل المحتوى عند عرض الصفحة
            else if (pageId === 'home-page') {
                loadFeaturedProducts();
                // تحديد رابط التنقل النشط
                document.querySelector('#home-page nav a[onclick*="home-page"]').classList.add('active');
            } else if (pageId === 'products-page') {
                loadAllProducts();
                document.querySelector('#products-page nav a[onclick*="products-page"]').classList.add('active');
            } else if (pageId === 'login-page') {
                document.querySelector('#login-page nav a[onclick*="login-page"]').classList.add('active');
                document.getElementById('login-form').reset();
                document.getElementById('login-error').style.display = 'none';
            }
        }

        // تحميل المنتجات المميزة
        function loadFeaturedProducts() {
            const container = document.getElementById('featured-products');
            container.innerHTML = '';
            
            // عرض أول 4 منتجات
            const featuredProducts = appData.products.slice(0, 4);
            
            if (featuredProducts.length === 0) {
                container.innerHTML = '<p class="empty-message">لا توجد منتجات متاحة حاليًا</p>';
                return;
            }
            
            featuredProducts.forEach(product => {
                const productCard = createProductCard(product);
                container.appendChild(productCard);
            });
            
            // تحديث رابط الواتساب في الفوتر
            document.getElementById('whatsapp-link').href = `https://wa.me/${appData.whatsappNumber}`;
        }

        // تحميل جميع المنتجات
        function loadAllProducts() {
            const container = document.getElementById('all-products');
            container.innerHTML = '';
            
            if (appData.products.length === 0) {
                container.innerHTML = '<p class="empty-message">لا توجد منتجات متاحة حاليًا</p>';
                return;
            }
            
            appData.products.forEach(product => {
                const productCard = createProductCard(product);
                container.appendChild(productCard);
            });
        }
        
        // إنشاء بطاقة منتج
        function createProductCard(product) {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            productCard.innerHTML = `
                <div class="product-badge">جديد</div>
                <img src="${product.image}" alt="${product.name}" class="product-image">
                <div class="product-info">
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="price-container">
                        <span class="price">${product.price.toFixed(2)} درهم</span>
                        <a href="https://wa.me/${appData.whatsappNumber}?text=مرحبًا، أنا مهتم بشراء ${product.name} (كود: ${product.id})" class="whatsapp-btn">
                            <i class="fab fa-whatsapp"></i> تواصل
                        </a>
                    </div>
                </div>
            `;
            return productCard;
        }

        // تحميل لوحة التحكم
        function loadDashboard() {
            document.getElementById('current-whatsapp').innerHTML = `
                <i class="fab fa-whatsapp"></i> 
                <span>${appData.whatsappNumber}</span>
            `;
            
            const container = document.getElementById('admin-products');
            container.innerHTML = '';
            
            if (appData.products.length === 0) {
                container.innerHTML = '<p class="empty-message">لم تقم بإضافة أي منتجات بعد</p>';
                return;
            }
            
            appData.products.forEach(product => {
                const isEditing = appData.editingProductId === product.id;
                const productItem = document.createElement('div');
                productItem.className = `product-item${isEditing ? ' editing' : ''}`;
                productItem.innerHTML = `
                    <h3>${product.name}</h3>
                    <p><strong>السعر:</strong> ${product.price.toFixed(2)} درهم</p>
                    <p><strong>الوصف:</strong> ${product.description.substring(0, 80)}...</p>
                    <div class="actions">
                        <button onclick="editProduct(${product.id})" class="btn btn-primary">
                            <i class="fas fa-edit"></i> تعديل
                        </button>
                        <button onclick="deleteProduct(${product.id})" class="btn btn-danger">
                            <i class="fas fa-trash"></i> حذف
                        </button>
                    </div>
                `;
                container.appendChild(productItem);
            });
        }

        // تسجيل الدخول
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const user = appData.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                appData.currentUser = user;
                showPage('dashboard-page');
            } else {
                const errorElement = document.getElementById('login-error');
                errorElement.style.display = 'flex';
                errorElement.querySelector('span').textContent = 'اسم المستخدم أو كلمة المرور غير صحيحة';
            }
        });

        // تسجيل الخروج
        function logout() {
            appData.currentUser = null;
            appData.editingProductId = null;
            showPage('home-page');
        }

        // إضافة منتج جديد
        document.getElementById('add-product-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-desc').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const image = document.getElementById('product-image').value;
            
            // إخفاء الرسائل السابقة
            document.getElementById('product-error').style.display = 'none';
            document.getElementById('product-success').style.display = 'none';
            
            // التحقق من صحة البيانات
            if (!name || !description || isNaN(price) || price <= 0 || !image) {
                const errorElement = document.getElementById('product-error');
                errorElement.style.display = 'flex';
                errorElement.querySelector('span').textContent = 'الرجاء ملء جميع الحقول بشكل صحيح';
                return;
            }
            
            if (appData.editingProductId) {
                // تحديث المنتج الموجود
                updateProduct(appData.editingProductId, name, description, price, image);
                
                const successElement = document.getElementById('product-success');
                successElement.style.display = 'flex';
                successElement.querySelector('span').textContent = 'تم تحديث المنتج بنجاح!';
                
                // إعادة تعيين وضع التعديل
                appData.editingProductId = null;
                
                // تغيير الزر إلى إضافة منتج
                const addBtn = document.querySelector('#add-product-form button[type="submit"]');
                addBtn.innerHTML = '<i class="fas fa-save"></i> حفظ المنتج';
            } else {
                // إضافة منتج جديد
                const newProduct = {
                    id: appData.products.length > 0 ? Math.max(...appData.products.map(p => p.id)) + 1 : 1,
                    name,
                    description,
                    price,
                    image
                };
                
                appData.products.push(newProduct);
                
                const successElement = document.getElementById('product-success');
                successElement.style.display = 'flex';
                successElement.querySelector('span').textContent = 'تمت إضافة المنتج بنجاح!';
            }
            
            // إعادة تحميل القوائم
            setTimeout(() => {
                loadDashboard();
                loadAllProducts();
                loadFeaturedProducts();
                
                // إعادة تعيين النموذج بعد 2 ثانية
                this.reset();
                document.getElementById('product-success').style.display = 'none';
                
                // العودة إلى لوحة التحكم بعد الإضافة
                if (!appData.editingProductId) {
                    showPage('dashboard-home');
                }
            }, 1000);
        });

        // تعديل رقم الواتساب
        document.getElementById('whatsapp-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const whatsappNumber = document.getElementById('whatsapp-number').value;
            
            // إخفاء الرسائل السابقة
            document.getElementById('whatsapp-error').style.display = 'none';
            document.getElementById('whatsapp-success').style.display = 'none';
            
            // تحقق بسيط من الرقم
            if (whatsappNumber.length < 8 || !whatsappNumber.startsWith('+')) {
                const errorElement = document.getElementById('whatsapp-error');
                errorElement.style.display = 'flex';
                errorElement.querySelector('span').textContent = 'رقم الواتساب غير صحيح. يجب أن يبدأ بـ + ويحتوي على 8 أرقام على الأقل';
                return;
            }
            
            appData.whatsappNumber = whatsappNumber;
            
            // إظهار رسالة النجاح
            const successElement = document.getElementById('whatsapp-success');
            successElement.style.display = 'flex';
            successElement.querySelector('span').textContent = 'تم تحديث رقم الواتساب بنجاح!';
            
            // تحديث العرض في كل مكان
            setTimeout(() => {
                document.getElementById('current-whatsapp').innerHTML = `
                    <i class="fab fa-whatsapp"></i> 
                    <span>${whatsappNumber}</span>
                `;
                loadFeaturedProducts();
                loadAllProducts();
                
                // إعادة تعيين النموذج
                this.reset();
                document.getElementById('whatsapp-success').style.display = 'none';
                document.getElementById('whatsapp-number').value = appData.whatsappNumber;
                
                // العودة إلى لوحة التحكم
                showPage('dashboard-home');
            }, 1000);
        });

        // حذف المنتج
        function deleteProduct(id) {
            if (confirm('هل أنت متأكد من رغبتك في حذف هذا المنتج؟')) {
                appData.products = appData.products.filter(p => p.id !== id);
                if (appData.editingProductId === id) {
                    appData.editingProductId = null;
                }
                loadDashboard();
                loadAllProducts();
                loadFeaturedProducts();
            }
        }

        // تعديل المنتج
        function editProduct(id) {
            const product = appData.products.find(p => p.id === id);
            if (product) {
                // ملء النموذج ببيانات المنتج
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-desc').value = product.description;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-image').value = product.image;
                
                // تخزين معرف المنتج الذي يتم تعديله
                appData.editingProductId = id;
                
                // تغيير زر النموذج إلى "تحديث المنتج"
                const addBtn = document.querySelector('#add-product-form button[type="submit"]');
                addBtn.innerHTML = '<i class="fas fa-sync-alt"></i> تحديث المنتج';
                
                // الذهاب إلى صفحة إضافة المنتج (التي تستخدم الآن للتعديل)
                showPage('add-product-page');
                
                // تحميل لوحة التحكم لتحديث حالة التعديل
                loadDashboard();
            }
        }
        
        // تحديث المنتج
        function updateProduct(id, name, description, price, image) {
            const productIndex = appData.products.findIndex(p => p.id === id);
            if (productIndex !== -1) {
                // تحديث المنتج
                appData.products[productIndex] = {
                    id,
                    name,
                    description,
                    price,
                    image
                };
            }
        }

        // تحميل البيانات الأولية عند بدء التشغيل
        window.onload = function() {
            // محاكاة تحميل البيانات
            setTimeout(() => {
                loadFeaturedProducts();
                document.getElementById('whatsapp-number').value = appData.whatsappNumber;
            }, 1000);
        };
    </script>
</body>
</html>